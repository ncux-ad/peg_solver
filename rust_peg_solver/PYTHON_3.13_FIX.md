# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Python 3.13

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ Rust –º–æ–¥—É–ª—è —Å Python 3.13 –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:

```
error: the configured Python interpreter version (3.13) is newer than PyO3's maximum supported version (3.12)
```

## –ü—Ä–∏—á–∏–Ω–∞

PyO3 –≤–µ—Ä—Å–∏–∏ 0.21 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Python 3.13 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è - 3.12).

## –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω PyO3 –¥–æ –≤–µ—Ä—Å–∏–∏ 0.22, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Python 3.13.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è

–í `Cargo.toml` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:

```toml
[dependencies]
pyo3 = { version = "0.22", features = ["extension-module"] }
```

### –°–±–æ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd rust_peg_solver
cargo update  # –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
maturin develop --release
# –∏–ª–∏
./build.sh
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python 3.12

–ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ PyO3 –Ω–µ –ø–æ–º–æ–≥–ª–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python 3.12:

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π venv —Å Python 3.12
python3.12 -m venv venv312
source venv312/bin/activate
pip install -r requirements.txt maturin
cd rust_peg_solver
maturin develop --release
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ ABI3 (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PyO3 0.21 —Å Python 3.13:

```bash
export PYO3_USE_ABI3_FORWARD_COMPATIBILITY=1
maturin develop --release
```

**‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ**: –≠—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ Cython

Rust –º–æ–¥—É–ª—å –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω - –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ —Å Cython (26x —É—Å–∫–æ—Ä–µ–Ω–∏–µ):

```bash
python setup.py build_ext --inplace
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
python -c "from core.rust_fast import USING_RUST; print(f'Rust: {USING_RUST}')"
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: `Rust: True`

## –í–µ—Ä—Å–∏–∏ PyO3 –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Python

| PyO3 –≤–µ—Ä—Å–∏—è | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Python | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|-------------|------------------|------------|
| 0.21        | 3.7 - 3.12       | –°—Ç–∞–±–∏–ª—å–Ω–∞—è |
| 0.22        | 3.7 - 3.13       | –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 3.13 |
| 0.23+       | 3.7 - 3.13       | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 3.13 |

## –°—Å—ã–ª–∫–∏

- [PyO3 –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://pyo3.rs/)
- [Python 3.13 –∏–∑–º–µ–Ω–µ–Ω–∏—è](https://docs.python.org/3/whatsnew/3.13.html)
