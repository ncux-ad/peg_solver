# –†–µ–≤–∏–∑–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ Peg Solitaire Solver

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ó–∞–º–µ–Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ `bin().count('1')` –Ω–∞ –±—ã—Å—Ç—Ä—ã–π popcount ‚ö°

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `bin(pegs).count('1')` –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ–µ, —Ç–∞–∫ –∫–∞–∫:
- –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞
- –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–π —Å—Ç—Ä–æ–∫–µ
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ CPU –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ popcount

**–†–µ—à–µ–Ω–∏–µ**:
- –î–ª—è Python 3.10+: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `int.bit_count()` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç CPU popcount)
- –î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±—ã—Å—Ç—Ä—ã–π popcount —á–µ—Ä–µ–∑ –±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã**:
- `core/bitboard.py` - –æ—Å–Ω–æ–≤–Ω–æ–π BitBoard –∫–ª–∞—Å—Å
- `core/fast_bitboard_py.py` - Python fallback –≤–µ—Ä—Å–∏—è
- `core/zobrist.py` - ZobristBitBoard
- `heuristics/pattern_db.py` - Pattern Database
- `solvers/pattern_astar.py` - Pattern A* —Ä–µ—à–∞—Ç–µ–ª—å
- `solutions/english_solutions.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—à–µ–Ω–∏–π
- `web/app.py` - Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 5-10x –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–¥—Å—á—ë—Ç–∞ –±–∏—Ç–æ–≤

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ü–∏–∫–ª–æ–≤ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º üîÑ

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –í `governor.py` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ü–∏–∫–ª –ø–æ –≤—Å–µ–º 49 –ø–æ–∑–∏—Ü–∏—è–º –≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã—Ö (33)
- –î–≤–æ–π–Ω–æ–π –ø—Ä–æ—Ö–æ–¥ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º –≤ `get_moves()`

**–†–µ—à–µ–Ω–∏–µ**:
- –ó–∞–º–µ–Ω—ë–Ω `range(49)` –Ω–∞ `ENGLISH_VALID_POSITIONS` –≤ `_avg_distance_to_center()`
- –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –¥–≤–∞ —Ü–∏–∫–ª–∞ –≤ `get_moves()` –≤ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥
- –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ `core/bitboard.py` –∏ `core/zobrist.py`

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 1.5-2x –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ö–æ–¥–æ–≤

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `canonical()` –º–µ—Ç–æ–¥–∞ üéØ

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –°–æ–∑–¥–∞–≤–∞–ª–æ—Å—å 8 –æ–±—ä–µ–∫—Ç–æ–≤ BitBoard –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–∏–º–º–µ—Ç—Ä–∏–π
- –õ–∏—à–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏

**–†–µ—à–µ–Ω–∏–µ**:
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `pegs` (int), –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ BitBoard —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–æ–Ω—Ü–µ (–¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `_rotate_90_pegs()` –∏ `_flip_h_pegs()`

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 2-3x –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –∫–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏–∏

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `is_dead()` –º–µ—Ç–æ–¥–∞ ‚ö°

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –í—ã–∑—ã–≤–∞–ª—Å—è `get_moves()`, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Ö–æ–¥—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ö–æ–¥–æ–≤

**–†–µ—à–µ–Ω–∏–µ**:
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ —Ö–æ–¥–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ –∂–µ –±–∏—Ç–æ–≤—ã–µ –º–∞—Å–∫–∏, —á—Ç–æ –∏ –≤ `get_moves()`, –Ω–æ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 3-5x –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—É–ø–∏–∫–æ–≤

### 5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `_count_isolated()` –º–µ—Ç–æ–¥–∞ üîç

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `any()` —Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ª–∏—à–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã `board.has_peg()`

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ `pegs` —á–µ—Ä–µ–∑ –±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –∏–∑ —Ü–∏–∫–ª–∞ –ø—Ä–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ —Å–æ—Å–µ–¥–∞
- –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 1.5-2x –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–ª—ã—à–∫–æ–≤

## –ò—Ç–æ–≥–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ü–æ–¥—Å—á—ë—Ç –±–∏—Ç–æ–≤**: 5-10x –±—ã—Å—Ç—Ä–µ–µ (popcount –≤–º–µ—Å—Ç–æ bin().count())
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–æ–¥–æ–≤**: 1.5-2x –±—ã—Å—Ç—Ä–µ–µ (–æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö)
- **–ö–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏—è**: 2-3x –±—ã—Å—Ç—Ä–µ–µ (–º–µ–Ω—å—à–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—É–ø–∏–∫–æ–≤**: 3-5x –±—ã—Å—Ç—Ä–µ–µ (–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ö–æ–¥–æ–≤)
- **–ü–æ–¥—Å—á—ë—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö**: 1.5-2x –±—ã—Å—Ç—Ä–µ–µ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã)

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ Python 3.8+ (—Å fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π)
- ‚úÖ Python 3.10+ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `bit_count()`)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
- ‚úÖ –ö–æ–¥ –æ—Å—Ç–∞—ë—Ç—Å—è —á–∏—Ç–∞–µ–º—ã–º
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**:
   - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã `canonical()` –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–∑–∏—Ü–∏–π
   - LRU –∫—ç—à –¥–ª—è `get_moves()` –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø–æ–∑–∏—Ü–∏–π

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Cython/Rust**:
   - –£–∂–µ –µ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –Ω–æ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
   - –û—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–∏–∫–ª–æ–≤

3. **–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å NumPy –¥–ª—è batch –æ–ø–µ—Ä–∞—Ü–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π)

4. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
```bash
python3 -c "from core.bitboard import BitBoard; b = BitBoard.english_start(); print(f'Test: {b.peg_count()} pegs'); print(f'Moves: {len(b.get_moves())}'); print('OK')"
```

---

**–î–∞—Ç–∞ —Ä–µ–≤–∏–∑–∏–∏**: 2024  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
