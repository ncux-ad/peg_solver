# Peg Solitaire Solver

üéØ –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ—à–∞—Ç–µ–ª—å –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ Peg Solitaire —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **11 –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ä–µ—à–µ–Ω–∏—è**: DFS, A*, IDA*, Beam Search, Parallel DFS, Parallel Beam, Bidirectional, Pattern A*, Zobrist DFS, Hybrid, Governor, **Lookup**
- **Lookup Table**: ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (O(1))
- **Web UI**: üåê –£–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –¥–æ—Å–∫–æ–π
- **–ú—É–ª—å—Ç–∏–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**: ‚ö° –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ (~2-4x)
- **BitBoard –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**: O(1) –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –±–∏—Ç–æ–≤—É—é –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫—É
- **Cython —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**: 26x —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Pagoda function pruning**: –æ—Ç—Å–µ—á–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (30-50% —ç–∫–æ–Ω–æ–º–∏—è)
- **Symmetry reduction**: 8x —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ø–æ–∏—Å–∫–∞
- **Pattern Database**: –ü—Ä–µ–¥–≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è A*
- **Zobrist Hashing**: –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö–µ—à–∞ (O(1))
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è (–±—ã—Å—Ç—Ä–æ)
python main.py --test

# –í—ã–±–æ—Ä —Ä–µ—à–∞—Ç–µ–ª—è
python main.py --test --solver dfs
python main.py --test --solver beam
python main.py --test --solver parallel

# –°–ø—Ä–∞–≤–∫–∞
python main.py --help
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
peg_solver/
‚îú‚îÄ‚îÄ main.py                 # CLI —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ
‚îú‚îÄ‚îÄ core/                   # –Ø–¥—Ä–æ
‚îÇ   ‚îú‚îÄ‚îÄ board.py            # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ frozenset
‚îÇ   ‚îú‚îÄ‚îÄ bitboard.py         # –ë—ã—Å—Ç—Ä–æ–µ –±–∏—Ç–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ utils.py            # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ solvers/                # –†–µ—à–∞—Ç–µ–ª–∏ (–∫–∞–∂–¥—ã–π –≤ —Å–≤–æ—ë–º —Ñ–∞–π–ª–µ)
‚îÇ   ‚îú‚îÄ‚îÄ base.py             # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ   ‚îú‚îÄ‚îÄ dfs.py              # DFS + –º–µ–º–æ–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ astar.py            # A* –∏ IDA*
‚îÇ   ‚îú‚îÄ‚îÄ beam.py             # Beam Search
‚îÇ   ‚îú‚îÄ‚îÄ parallel.py         # –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π DFS
‚îÇ   ‚îú‚îÄ‚îÄ bidirectional.py    # –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
‚îÇ   ‚îî‚îÄ‚îÄ hybrid.py           # –ì–∏–±—Ä–∏–¥–Ω—ã–π (–∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ)
‚îÇ
‚îú‚îÄ‚îÄ heuristics/             # –≠–≤—Ä–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ basic.py            # –ë–∞–∑–æ–≤—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ pagoda.py           # Pagoda function
‚îÇ   ‚îî‚îÄ‚îÄ advanced.py         # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ
‚îÇ
‚îú‚îÄ‚îÄ analysis/               # –ê–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ patterns.py         # –®–∞–±–ª–æ–Ω—ã —Ö–æ–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ symmetry.py         # –°–∏–º–º–µ—Ç—Ä–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ peg_io/                 # –í–≤–æ–¥/–≤—ã–≤–æ–¥
    ‚îú‚îÄ‚îÄ parser.py           # –ü–∞—Ä—Å–∏–Ω–≥ –≤—Ö–æ–¥–∞
    ‚îú‚îÄ‚îÄ visualizer.py       # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ cache.py            # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π
```

## –†–µ—à–∞—Ç–µ–ª–∏

| –†–µ—à–∞—Ç–µ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ–ª–Ω–æ—Ç–∞ | –°–∫–æ—Ä–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|----------|---------|----------|--------------|
| `lookup` | üìö –ë–∞–∑–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π | ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ |
| `governor` | üéØ –£–º–Ω—ã–π –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** |
| `parallel_beam` | ‚ö° –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π Beam Search | ‚ùå –ù–µ—Ç | ‚≠ê‚≠ê‚≠ê‚≠ê | –ë–æ–ª—å—à–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (>25) |
| `parallel` | ‚ö° –ú–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–π DFS | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –ì–ª—É–±–æ–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ |
| `beam` | Beam Search | ‚ùå –ù–µ—Ç | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π |
| `dfs` | DFS —Å –º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê | –ú–∞–ª–µ–Ω—å–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (<10) |
| `astar` | A* —Å —ç–≤—Ä–∏—Å—Ç–∏–∫–∞–º–∏ | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –°—Ä–µ–¥–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ |
| `ida` | IDA* (—ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏) | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê | –°–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (>20) |
| `pattern_astar` | A* —Å Pattern Database | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π A* |
| `zobrist_dfs` | DFS —Å Zobrist Hashing | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ |
| `bidirectional` | –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –£—Å–∫–æ—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ |
| `hybrid` | –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö | ‚úÖ –î–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä |

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
from core.bitboard import BitBoard
from solvers import DFSSolver, HybridSolver

# –°–æ–∑–¥–∞—ë–º –¥–æ—Å–∫—É
board = BitBoard.english_start()

# –†–µ—à–∞–µ–º
solver = DFSSolver(verbose=True)
solution = solver.solve(board)

# –ò–ª–∏ –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
solver = HybridSolver(timeout=60)
solution = solver.solve(board)
```

## –≠–≤—Ä–∏—Å—Ç–∏–∫–∏

```python
from heuristics import pagoda_value, PAGODA_WEIGHTS
from core.bitboard import BitBoard

board = BitBoard.english_start()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—à–∞–µ–º–æ—Å—Ç–∏
if pagoda_value(board) >= PAGODA_WEIGHTS[24]:
    print("–ü–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ—à–µ–Ω–∞")
```

## Web UI

–ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

```bash
python -m web.app
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Web UI:**
- üìã –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ—Å–∫–∞ 7√ó7
- üéØ –í—ã–±–æ—Ä —Ä–µ—à–∞—Ç–µ–ª—è (Lookup, Governor, Parallel Beam, –∏ –¥—Ä.)
- üé¨ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è (–ø–æ—à–∞–≥–æ–≤–æ)
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—à–µ–Ω–∏—è (–≤—Ä–µ–º—è, —Ö–æ–¥—ã, —É–∑–ª—ã)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π
- üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤ –ø–ª–∞–Ω–∞—Ö)

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ú–µ—Ç–æ–¥—ã —É—Å–∫–æ—Ä–µ–Ω–∏—è

1. **Lookup Table** - O(1) –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π ‚ö°‚ö°‚ö°
2. **Cython** - 26x —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π ‚ö°‚ö°‚ö°
3. **–ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º–∞** - 8x —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ ‚ö°‚ö°
4. **Pagoda pruning** - 30-50% –æ—Ç—Å–µ—á–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã—Ö ‚ö°‚ö°
5. **Parallel Beam** - ~2-4x –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö ‚ö°‚ö°
6. **Parallel DFS** - ~N —Ä–∞–∑ –¥–ª—è –ø–µ—Ä–≤—ã—Ö —Ö–æ–¥–æ–≤ ‚ö°‚ö°

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ê–Ω–≥–ª–∏–π—Å–∫–∞—è –¥–æ—Å–∫–∞ (32 –∫–æ–ª—ã—à–∫–∞):**
- LookupSolver: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ (–∏–∑ –±–∞–∑—ã)
- Beam Search (500): ~6 —Å–µ–∫—É–Ω–¥
- Governor: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä (~6 —Å–µ–∫—É–Ω–¥)

**–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (20-30 –∫–æ–ª—ã—à–∫–æ–≤):**
- Governor: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä (~10-60 —Å–µ–∫—É–Ω–¥)
- Parallel Beam: –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (~15-90 —Å–µ–∫—É–Ω–¥)

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [PERFORMANCE.md](PERFORMANCE.md)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[PROJECT_BRIEF.md](PROJECT_BRIEF.md)** - –ü–æ–ª–Ω—ã–π –±—Ä–∏—Ñ –ø—Ä–æ–µ–∫—Ç–∞
- **[PERFORMANCE.md](PERFORMANCE.md)** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **[OPTIMIZATION_GUIDE.md](OPTIMIZATION_GUIDE.md)** - üöÄ **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (Rust, Numba JIT)**
- **[OPTIMIZATION_SUMMARY_RU.md](OPTIMIZATION_SUMMARY_RU.md)** - üìä **–°–≤–æ–¥–∫–∞ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- **[MULTITHREADING_SUMMARY.md](MULTITHREADING_SUMMARY.md)** - –°–≤–æ–¥–∫–∞ –ø–æ –º—É–ª—å—Ç–∏–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Flask (–¥–ª—è Web UI)
- Pillow (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤)
- Cython (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
pip install -r requirements.txt
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–ê–ª–≥–æ—Ä–∏—Ç–º–æ–≤**: 11 —Ä–µ—à–∞—Ç–µ–ª–µ–π
- **–≠–≤—Ä–∏—Å—Ç–∏–∫**: 10+ —Ñ—É–Ω–∫—Ü–∏–π
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π**: 7 –º–µ—Ç–æ–¥–æ–≤ —É—Å–∫–æ—Ä–µ–Ω–∏—è
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~4600+
- **–ú–æ–¥—É–ª–µ–π**: 38 —Ñ–∞–π–ª–æ–≤
- **–Ø–∑—ã–∫–∏**: Python, Cython, Rust, Numba JIT, JavaScript, HTML/CSS

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: Production Ready ‚úÖ
