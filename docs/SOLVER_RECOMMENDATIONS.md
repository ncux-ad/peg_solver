# Рекомендации по выбору решателя

## Проблема: новые решатели не решают большие доски

Новые решатели из Фаз 1-3 созданы как базовые версии без сложных оптимизаций. Они хорошо работают для маленьких и средних досок, но могут быть слишком медленными для больших досок (25+ колышков).

## Рекомендации по выбору решателя

### Для маленьких досок (<10 колышков)
✅ **Новые решатели работают хорошо:**
- `SimpleDFSSolver` - базовый поиск
- `DFSMemoSolver` - с мемоизацией
- `AStarSimpleSolver` - A* с простыми эвристиками

### Для средних досок (10-20 колышков)
✅ **Новые решатели работают:**
- `DFSMemoSolver` - рекомендуется
- `BeamSimpleSolver` - быстрый неполный
- `AStarSimpleSolver` - полный поиск

⚠️ **Могут работать медленно без оптимизаций**

### Для больших досок (>20 колышков)
❌ **Новые решатели могут не найти решение или работать очень долго**

✅ **Рекомендуется использовать оптимизированные решатели:**
- `BeamSolver` - оптимизированный Beam Search
- `DFSSolver` - оптимизированный DFS с Pagoda
- `LookupSolver` - если решение есть в базе
- `GovernorSolver` - умный выбор алгоритма
- `SequentialSolver` - перебор от простых к сложным

## Почему новые решатели медленные?

1. **Нет сложных оптимизаций:**
   - Нет Pagoda pruning (кроме DFSMemo для английской доски)
   - Простые эвристики вместо оптимизированных
   - Нет использования Rust/Cython ускорений

2. **Базовые алгоритмы:**
   - Созданы для демонстрации концепций
   - Не оптимизированы для производительности
   - Предназначены для обучения и тестирования

## Решения

### Вариант 1: Использовать оптимизированные решатели
Для больших досок используйте старые оптимизированные решатели:
- `BeamSolver` (beam_width=1000, max_depth=50)
- `DFSSolver` (с Pagoda pruning)
- `LookupSolver` (если решение в базе)

### Вариант 2: Увеличить параметры новых решателей
Для новых решателей можно увеличить параметры:
- `BeamSimpleSolver(beam_width=1000, max_depth=50)`
- `DFSMemoSolver` (уже имеет Pagoda для английской доски)

### Вариант 3: Добавить оптимизации в новые решатели
Можно улучшить новые решатели, добавив:
- Pagoda pruning для произвольных досок
- Использование оптимизированных эвристик
- Интеграцию Rust/Cython ускорений

## Текущий статус

- ✅ Новые решатели работают для всех досок, но медленнее старых
- ✅ DFSMemoSolver находит решение для больших досок (29 колышков) за ~105 секунд
- ✅ Старые оптимизированные решатели работают быстрее (~77 секунд для той же доски)
- ✅ BeamSimpleSolver с beam_width=1000 находит решение за ~14 секунд

## Результаты тестирования

Для доски с 29 колышками:
- **DFSMemoSolver**: ✅ Находит решение за ~105 секунд (14M узлов)
- **BeamSimpleSolver (beam_width=1000)**: ✅ Находит решение за ~14 секунд
- **Старый DFSSolver**: ✅ Находит решение за ~77 секунд
- **Старый BeamSolver**: ✅ Находит решение за ~14 секунд

## План улучшений

1. Добавить Pagoda pruning для произвольных досок
2. Использовать оптимизированные эвристики в новых решателях
3. Интегрировать Rust/Cython ускорения
4. Добавить автоматический выбор решателя на основе размера доски
